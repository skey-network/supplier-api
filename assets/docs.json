{"openapi":"3.0.0","info":{"title":"Supplier API","description":"","version":"1.0.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"Admin":{"type":"object","properties":{"id":{"type":"number","example":1,"description":"ID of Admin"},"email":{"type":"string","example":"test@example.com","description":"Admins' e-mail address"},"role":{"type":"string","example":"admin","description":"Admins' role"}},"required":["id","email","role"]},"UnauthorizedResponse":{"type":"object","properties":{"statusCode":{"type":"number","example":401},"message":{"type":"string","example":"Unauthorized"}},"required":["statusCode","message"]},"ForbiddenResponse":{"type":"object","properties":{"statusCode":{"type":"number","example":403},"message":{"type":"string","example":"Forbidden"}},"required":["statusCode","message"]},"NotFoundResponse":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not found"}},"required":["statusCode","message"]},"CreateAdminDto":{"type":"object","properties":{"email":{"type":"string","description":"Admins e-mail address","example":"test@example.com"},"password":{"type":"string","description":"Admins password - length between 8-32 characters","example":"foobarbaz"},"role":{"type":"string","description":"Admins role","enum":["admin","editor"],"example":"admin"}},"required":["email","password","role"]},"CustomErrorMessage":{"type":"object","properties":{"statusCode":{"type":"number","example":400,"description":"HTTP response code"},"message":{"example":["custom error message"],"description":"Error message(s)","type":"array","items":{"type":"string"}},"error":{"type":"string","example":"Bad request"}},"required":["statusCode","message","error"]},"UpdateAdminDto":{"type":"object","properties":{"email":{"type":"string","description":"Admins e-mail address","example":"test@example.com"},"password":{"type":"string","description":"Admins password - length between 8-32 characters","example":"foobarbaz"},"role":{"type":"string","description":"Admins role","enum":["admin","editor"],"example":"admin"}}},"AuthResponse":{"type":"object","properties":{"access_token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6eyJ1c2VybmFtZSI6ImFkbWluIn0sImlhdCI6MTYxMTc1MjI4NCwiZXhwIjoxNjExODM4Njg0fQ.WWILuDGagf382Xx9Jiaur0qnVM4LI0jei_z2Q-BlQjY","description":"JWT Token"}},"required":["access_token"]},"PhysicalAddressDto":{"type":"object","properties":{"addressLine1":{"type":"string","description":"Address","example":"Test Str 123"},"addressLine2":{"type":"string","description":"Address","example":"2nd floor, room #234"},"city":{"type":"string","description":"City name","example":"Test City"},"postcode":{"type":"string","description":"Post Code","example":"11-111"},"state":{"type":"string","description":"State name or code","example":"AZ"},"country":{"type":"string","description":"Country name or code","example":"USA"},"number":{"type":"string","description":"Room number","example":"234"},"floor":{"type":"string","description":"Floor number","example":"2"}}},"DeviceDetailsDto":{"type":"object","properties":{"deviceType":{"type":"string","description":"Device type. Accepted values: ['car barrier', 'human barrier', 'elevator', 'human', 'mobile', 'other']","example":"mobile"},"deviceModel":{"type":"string","description":"Device model.","example":"TR-808"},"additionalDescription":{"type":"string","description":"Any additional description of the device","example":"Lorem ipsum dolor sit amet"},"assetUrl":{"type":"string","description":"Asset URL","example":"https://loremflickr.com/800/600"},"url":{"type":"string","description":"Place for an URL of company, institution or something else","example":"https://google.com"},"contactInfo":{"type":"string","description":"You can leave any contact info here","example":"test@example.com, 123-456-789"},"physicalAddress":{"$ref":"#/components/schemas/PhysicalAddressDto"}}},"CreateDeviceDto":{"type":"object","properties":{"name":{"type":"string","description":"Device name","example":"Example device"},"active":{"type":"boolean","description":"Flag to determine if the device is active","example":true},"connected":{"type":"boolean","description":"Flag to determine if the device is connected","example":true},"description":{"type":"string","description":"Device description","example":"Example device description"},"lat":{"type":"number","description":"Latitude","example":20},"lng":{"type":"number","description":"Longitude","example":15},"alt":{"type":"number","description":"Altitude","example":2400},"type":{"type":"string","description":"Device type","example":"device","default":"device"},"price":{"type":"number","description":"[Unused] - Price for a key to this device","example":2400},"details":{"$ref":"#/components/schemas/DeviceDetailsDto"},"custom":{"type":"object","description":"custom fields","example":{"foo":"bar","bar":true,"baz":10}}},"required":["name","active","connected"]},"BlockchainAddress":{"type":"object","properties":{"address":{"type":"string","description":"SmartKey address","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"encryptedSeed":{"type":"string","description":"AES encrypted backup phrase. Refer to the README for details.","example":"U2FsdGVkX1+UHPgmbS60YfwtbnEB+h6y9Q9VoR1aqB+GYBB7LQW7Jxruasw6STPih3yk2/Ty79KMcp4SllG3b00P0IR/jpuyzTw1wQ5UHNCYk7YpqAuwwyxArlgWQP/IFdZkBWpJtVJ0PQ8ln8Odso5TlBhvEljxsRlGMe4uKks="}},"required":["address","encryptedSeed"]},"DeviceData":{"type":"object","properties":{"address":{"type":"string","description":"Device address","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"balance":{"type":"number","description":"Balance on the address","example":500000000},"ownerDapp":{"type":"string","description":"DApp address","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"connected":{"type":"boolean","description":"Is device connected?","example":true}},"required":["address","balance","ownerDapp","connected"]},"TransactionResponse":{"type":"object","properties":{"txHash":{"type":"string","description":"Transaction hash","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"}},"required":["txHash"]},"EditDevice":{"type":"object","properties":{"key1":{"type":"string","example":"value1"},"key2":{"type":"number","example":123}}},"ConnectionDetailsResponse":{"type":"object","properties":{"status":{"type":"string","description":"Connection status","example":"message"},"details":{"type":"object","description":"Connection details","example":{}}},"required":["status","details"]},"CreateConnectionDto":{"type":"object","properties":{"msisdn":{"type":"string","description":"MSISDN number from device provider","example":"3213213213"},"serverPhoneNumber":{"type":"string","description":"Server phone number from device provider","example":"45623"},"defaultDataStreamId":{"type":"string","description":"Default data stream ID from device provicer","example":"4562334564566"},"iccid":{"type":"string","description":"ICCID number from device provider","example":"0008949031122334455666"}},"required":["msisdn","serverPhoneNumber","defaultDataStreamId","iccid"]},"DeviceMessageDto":{"type":"object","properties":{"timestamp":{"type":"string","description":"timestamp","example":"2021-03-19T10:06:34Z"},"payload":{"type":"string","description":"message data","example":"Lon:20.518440 Lat:53.786247 External Voltage"},"source":{"type":"string","description":"device id","example":"urn:lo:nsid:blockchain:3P2pTpQhGbZrJXATKr75A1uZjeTrb4PHMYf"}},"required":["timestamp","payload","source"]},"DeviceCommandDto":{"type":"object","properties":{"keyOwnerAddress":{"type":"string","description":"Key owner address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k"},"keyAssetId":{"type":"string","description":"Key asset ID","example":"9kY6qhKMRs4jHBPTHV1Pgdzqbo3X4XmBM7koAxwR9RTf"}},"required":["keyOwnerAddress","keyAssetId"]},"DeviceConnectExistingDto":{"type":"object","properties":{"deviceId":{"type":"string","description":"ID of existing Device WITH all prefixes","example":"urn:lo:nsid:blockchain:foobar"},"address":{"type":"string","description":"[Optional] Blockchain address to assign existing device to","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k"},"deviceParams":{"description":"[Optional] Attributes of a new blockchain Device. Don't provide this attribute when connecting to an existing address","allOf":[{"$ref":"#/components/schemas/CreateDeviceDto"}]}},"required":["deviceId"]},"DeviceConnectExistingResponse":{"type":"object","properties":{"status":{"type":"string","description":"Connection status","example":"device connected"},"details":{"type":"object","description":"Connection details","example":{}},"address":{"type":"string","description":"Address of device on the blockchain","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"encryptedSeed":{"type":"string","description":"AES encrypted backup phrase. Returned only when creating a new blockchain address.","example":"U2FsdGVkX1+UHPgmbS60YfwtbnEB+h6y9Q9VoR1aqB+GYBB7LQW7Jxruasw6STPih3yk2/Ty79KMcp4SllG3b00P0IR/jpuyzTw1wQ5UHNCYk7YpqAuwwyxArlgWQP/IFdZkBWpJtVJ0PQ8ln8Odso5TlBhvEljxsRlGMe4uKks="}},"required":["status","details","address","encryptedSeed"]},"Key":{"type":"object","properties":{"assetId":{"type":"string","description":"ID of key","example":"9kY6qhKMRs4jHBPTHV1Pgdzqbo3X4XmBM7koAxwR9RTf"},"issuer":{"type":"string","description":"Address of issuer","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"device":{"type":"string","description":"Address of device","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"issueTimestamp":{"type":"number","description":"Time of issue in Epoch timestamp","example":1592861516794},"validTo":{"type":"number","description":"Time of expiration in Epoch timestamp","example":1592861516794}},"required":["assetId","issuer","device","issueTimestamp","validTo"]},"CreateKeyDto":{"type":"object","properties":{"device":{"type":"string","description":"Device Address","example":"3M2TC9skx4CuV2pwfCHwxDY9JPAAGA9sNkt"},"validTo":{"type":"number","description":"Key expiration date in Epoch miliseconds","example":1619180438000},"amount":{"type":"number","description":"Amount of keys - max 80","example":10},"recipient":{"type":"string","description":"Recipient Address","example":"3M2TC9skx4CuV2pwfCHwxDY9JPAAGA9sNkt"}},"required":["device","validTo","amount"]},"CreateKeyResultResponse":{"type":"object","properties":{"assetId":{"type":"string","description":"Key Asset ID","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS"},"transferTx":{"type":"string","description":"Transfer transaction hash","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS"},"dataTx":{"type":"string","description":"Data transaction hash","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS"},"success":{"type":"boolean","description":"status","example":true}},"required":["success"]},"CreateKeyResultResponseWithError":{"type":"object","properties":{"assetId":{"type":"string","description":"Key Asset ID","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS"},"transferTx":{"type":"string","description":"Transfer transaction hash","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS"},"dataTx":{"type":"string","description":"Data transaction hash","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS"},"success":{"type":"boolean","description":"status","example":false},"error":{"type":"string","description":"Error message","example":"Something went wrong"}},"required":["success"]},"CreateKeyRequestsDto":{"type":"object","properties":{"requests":{"description":"Array of requests","type":"array","items":{"$ref":"#/components/schemas/CreateKeyDto"}}},"required":["requests"]},"CreateKeyForMultipleDevicesResponseWithError":{"type":"object","properties":{"device":{"type":"string","description":"Device Address","example":"3M2TC9skx4CuV2pwfCHwxDY9JPAAGA9sNkt"},"keys":{"description":"Array of errors","type":"array","items":{"$ref":"#/components/schemas/CreateKeyResultResponseWithError"}}},"required":["device","keys"]},"CreateAndTransferKeyDto":{"type":"object","properties":{"device":{"type":"string","description":"Device Address","example":"3M2TC9skx4CuV2pwfCHwxDY9JPAAGA9sNkt"},"user":{"type":"string","description":"User Address","example":"3M2TC9skx4CuV2pwfCHwxDY9JPAAGA9sNkt"},"validTo":{"type":"number","description":"Key expiration date","example":1619180438000},"amount":{"type":"number","description":"Amount of keys","example":1}},"required":["device","user","validTo","amount"]},"AssetTransactionResponse":{"type":"object","properties":{"txHash":{"type":"string","description":"Transaction hash","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"assetId":{"type":"string","description":"Asset ID","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS"}},"required":["txHash","assetId"]},"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"Public user name","example":"RBB"},"description":{"type":"string","description":"Public user description","example":"RBB description"}},"required":["name","description"]},"User":{"type":"object","properties":{"address":{"type":"string","description":"Users' address in the blockchain","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"name":{"type":"string","description":"User name","example":"Public user"},"description":{"type":"string","description":"User description","example":"Lorem Ipsum dolor sit amet"},"balance":{"type":"number","description":"Balance on the account","example":200000000}},"required":["address","name","description","balance"]},"FaucetDto":{"type":"object","properties":{"address":{"type":"string","description":"Address to transfer funds to","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud"},"amount":{"type":"number","description":"Amount of funds to transfer","example":5000000}},"required":["address","amount"]},"SetupDto":{"type":"object","properties":{"setScript":{"type":"boolean","description":"Flag to set script or not","example":true},"name":{"type":"string","description":"Public name of the dApp","example":"RBB"},"description":{"type":"string","description":"Public description of the dApp","example":"RBB Description"},"alias":{"type":"string","description":"Alias of the dApp on the blockchain.","example":"dapp_rbb"}}},"Status":{"type":"object","properties":{"address":{"type":"string","description":"Address of the dApp","example":"3M2TC9skx4CuV2pwfCHwxDY9JPAAGA9sNkt"},"script":{"type":"boolean","description":"Flag determining if a script was set","example":true},"name":{"type":"string","description":"Name of the dApp","example":"dApp"},"description":{"type":"string","description":"Description of the dApp","example":"Lorem Ipsum dolor sit amet"},"nodeUrl":{"type":"string","description":"URL of the node","example":"http://localhost:6869"},"chainId":{"type":"string","description":"Chain ID","example":"R"},"aliases":{"description":"Aliases of the dApp","example":["alias:R:foobar","alias:R:dapp@rbb"],"type":"array","items":{"type":"array"}}},"required":["address","script","name","description","nodeUrl","chainId","aliases"]}}},"paths":{"/admins":{"get":{"operationId":"AdminsController_findAll","summary":"Get all admins","parameters":[],"responses":{"200":{"description":"Returns info about all admins","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Admin"}}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"403":{"description":"User role must be admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenResponse"}}}}},"tags":["admins"],"security":[{"bearer":[]}]},"post":{"operationId":"AdminsController_create","summary":"Create new admin","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAdminDto"}}}},"responses":{"201":{"description":"Admin created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Admin"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"403":{"description":"User role must be admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenResponse"}}}}},"tags":["admins"],"security":[{"bearer":[]}]}},"/admins/{id}":{"get":{"operationId":"AdminsController_findOne","summary":"Get admin info","parameters":[{"name":"id","required":true,"in":"path","description":"ID of admin","example":123,"schema":{"type":"string"}}],"responses":{"200":{"description":"Returns admin info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Admin"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"403":{"description":"User role must be admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["admins"],"security":[{"bearer":[]}]},"delete":{"operationId":"AdminsController_remove","summary":"Delete admin","parameters":[{"name":"id","required":true,"in":"path","description":"ID of admin","example":123,"schema":{"type":"string"}}],"responses":{"200":{"description":"Admin deleted"},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"403":{"description":"User role must be admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["admins"],"security":[{"bearer":[]}]},"put":{"operationId":"AdminsController_update","summary":"Update existing admin","parameters":[{"name":"id","required":true,"in":"path","description":"ID of admin","example":123,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAdminDto"}}}},"responses":{"200":{"description":"Admin updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Admin"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"403":{"description":"User role must be admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForbiddenResponse"}}}}},"tags":["admins"],"security":[{"bearer":[]}]}},"/auth/login":{"post":{"operationId":"AuthController_login","summary":"Log in and get JWT token","parameters":[{"example":"test@example.com","description":"User email","name":"email","in":"query","required":true,"schema":{"type":"string"}},{"example":"foobar","description":"User password","name":"password","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"201":{"description":"User logged in","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["auth"]}},"/devices":{"post":{"operationId":"DevicesController_create","summary":"Add a new device","description":"Create a new blockchain account for a device","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDeviceDto"}}}},"responses":{"201":{"description":"Device created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockchainAddress"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]},"get":{"operationId":"DevicesController_index","summary":"List of all devices","description":"Fetch blockchain addresses of all devices from dApp","deprecated":true,"parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"items":{"type":"string"},"example":["3MwzVVTXiYGQsp48VX8adQ8cpqERGusRZfD","2NBPqqjDH2eYmoHeXNPnHhLvA7D4UDQXQcx","7MvTY6UrP8PHPv5DYTs1uCQ8HSQ3tkP6JdQ"]}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/{address}":{"get":{"operationId":"DevicesController_show","summary":"Get details of device","description":"Fetches device details","deprecated":true,"parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}}],"responses":{"200":{"description":"Device data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceData"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]},"delete":{"operationId":"DevicesController_destroy","summary":"Remove Device","description":"Remove device from dApp","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}}],"responses":{"200":{"description":"Device removed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]},"put":{"operationId":"DevicesController_edit","summary":"Edit device data","description":"Edit any values in device data storage","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditDevice"}}}},"responses":{"200":{"description":"Device updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/{address}/keys/{assetId}":{"post":{"operationId":"DevicesController_addKey","summary":"Add key to device whitelist","description":"Add key to device whitelist","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}},{"name":"assetId","required":true,"in":"path","description":"ID of asset","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS","schema":{"type":"string"}}],"responses":{"200":{"description":"Key added successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]},"delete":{"operationId":"DevicesController_removeKey","summary":"Remove key from device whitelist","description":"Remove key from device whitelist","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}},{"name":"assetId","required":true,"in":"path","description":"ID of asset","example":"7HbEUg9yWMGtJ9dNW24rvcseiPYXAAaCoe23StkcyWXS","schema":{"type":"string"}}],"responses":{"200":{"description":"Key removed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/{address}/connection":{"get":{"operationId":"DevicesController_connection","summary":"Get details of supplier connection","description":"Get details of supplier connection","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}}],"responses":{"200":{"description":"Connection details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectionDetailsResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/{address}/connect":{"post":{"operationId":"DevicesController_connect","summary":"Connect device to supplier","description":"Connect device to Orange Live Object","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateConnectionDto"}}}},"responses":{"200":{"description":"Device connected successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectionDetailsResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/{address}/disconnect":{"delete":{"operationId":"DevicesController_disconnect","summary":"Disconnect device from supplier","description":"Disconnect device from Orange Live Object","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}}],"responses":{"200":{"description":"Device disconnected successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/device_message":{"post":{"operationId":"DevicesController_deviceMessage","summary":"Send a message to IoT","description":"Send a message to IoT","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceMessageDto"}}}},"responses":{"201":{"description":"Successful message","content":{"application/json":{"schema":{"example":{}}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["devices"]}},"/devices/{address}/commands/{command}":{"post":{"operationId":"DevicesController_command","summary":"Send a command to the device","description":"Send a command to the device","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}},{"name":"command","required":true,"in":"path","description":"Name of the command to execute","example":"open","schema":{"type":"string"}},{"name":"waitForTx","required":true,"in":"query","description":"Send true to wait for response from the blockchain","example":"true","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceCommandDto"}}}},"responses":{"200":{"description":"Command sent"},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/connect_existing":{"post":{"operationId":"DevicesController_connectExisting","summary":"Connect an existing Device to the blockchain","description":"\n    Connect an existing LO Device to the blockchain\n    Providing 'address' param will connect the device to an existing blockchain account and not providing it will create a new one.\n    Connecting to a new blockchain account will return encrypted seed of the account.\n    Do not provide 'deviceParams' parameter when connecting to an existing account.\n    See schema of the request body for details.\n    NOTE: Successfull operation will change the ID of LO Device to a following format:\n    urn:lo:nsid:blockchain:{blockchainAddress}\n    ","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceConnectExistingDto"}}}},"responses":{"200":{"description":"Device connected successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceConnectExistingResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/devices/{address}/validate_transaction/{assetId}":{"post":{"operationId":"DevicesController_validateTransaction","summary":"Validate a transaction and broadcast it later","description":"\n    This endpoint validates if sent transaction is correctly signed\n    and - if it's valid - it is being saved to be broadcasted later.\n    Use this endpoint when you want to send an action directly to IoT,\n    which has to be also saved in the blockchain.\n    Actions are being saved only if they are valid.\n    Endpoint accepts only InvokeScript transactions.\n    To create transactions, use a library called waves-transactions.\n    ","parameters":[{"name":"address","required":true,"in":"path","description":"Device address","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}},{"name":"assetId","required":true,"in":"path","description":"ID of the key","example":"R6NF7LuXKDrXS2jqvbMa4QAQFVvD89Z6e6TFjM2gHah","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"example":{"type":16,"version":1,"senderPublicKey":"2pMQFrA5wh7Eh24zwwDXUZgbxCKhXBecmwvkabsVMUZG","dApp":"3MJ4QsJfxzp81RLVWzn3sY8WQ6PfXp38uCd","call":{"args":[{"type":"string","value":"R6NF7LuXKDrXS2jqvbMa4QAQFVvD89Z6e6TFjM2gHah"},{"type":"string","value":"open"}],"function":"deviceActionWithKey"},"payment":[],"fee":500000,"feeAssetId":null,"timestamp":1623417987075,"proofs":["2c5YUgyGo6yG4EQ5wGofP5jmFtVnm4wRYPHwRFuS5HFira4gxDNRvqViJn38A5XdTWLFy3Sef1URe6H1tcjt8W1r"],"id":"7g5m3wSUw6gck84fRPXZt7bDg3hhJxT4g3WxxeXY9pKM"}}}}},"responses":{"201":{"description":"Transaction is valid and it has been saved to be broadcasted later.","content":{"application/json":{"schema":{"example":{"verified":true}}}}},"400":{"description":"Example error","content":{"application/json":{"schema":{"example":{"verified":false,"error":"Transaction not verified"}}}}},"404":{"description":"Device not found","content":{"application/json":{"schema":{"example":{"statusCode":404,"message":"device not found","error":"not found"}}}}}},"tags":["devices"],"security":[{"bearer":[]}]}},"/keys":{"get":{"operationId":"KeysController_index","summary":"List all keys","description":"Fetch keys from dApp","deprecated":true,"parameters":[{"name":"limit","required":false,"in":"path","description":"Number of keys to be returned (defaults to 50)","example":50,"schema":{"type":"number"}},{"name":"after","required":false,"in":"path","description":"AssetId of key to paginate after (defaults to first token)","example":"9kY6qhKMRs4jHBPTHV1Pgdzqbo3X4XmBM7koAxwR9RTf","schema":{"type":"string"}}],"responses":{"200":{"description":"List of keys","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Key"}}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["keys"],"security":[{"bearer":[]}]},"post":{"operationId":"KeysController_create","summary":"Generate new keys","description":"Generate new keys and transfer them to a blockchain address. Maximum amount of keys created in single request is 80.\n      If recipient address is not given, the created key will stay on dapp address. Otherwise the key is sent to recipient address\n\n\n      This endpoint uses callback that sends request to supplier. It sends assetId and device address.","parameters":[{"name":"tags","required":false,"in":"query","isArray":true,"example":"tags=tag1&tags=tag2","description":"Tags for supplier","schema":{"type":"array","items":{"type":"string"}}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateKeyDto"}}}},"responses":{"201":{"description":"Key generated","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CreateKeyResultResponse"}}}}},"400":{"description":"Errors while creating key","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CreateKeyResultResponseWithError"}}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["keys"],"security":[{"bearer":[]}]}},"/keys/multi":{"post":{"operationId":"KeysController_createForMultipleDevices","summary":"Generate new keys for multiple devices","description":"Generate new keys for multiple devices and optionally transfer them to a blockchain address. Maximum amount of keys created in single request is 80.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateKeyRequestsDto"}}}},"responses":{"201":{"description":"Errors while creating keys","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CreateKeyForMultipleDevicesResponseWithError"}}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["keys"],"security":[{"bearer":[]}]}},"/keys/{assetId}":{"get":{"operationId":"KeysController_show","summary":"Get details of a key","description":"Fetches data from blockchain","deprecated":true,"parameters":[{"name":"assetId","required":true,"in":"path","description":"Key asset id","example":"9kY6qhKMRs4jHBPTHV1Pgdzqbo3X4XmBM7koAxwR9RTf","schema":{"type":"string"}}],"responses":{"200":{"description":"Key data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["keys"],"security":[{"bearer":[]}]},"delete":{"operationId":"KeysController_burn","summary":"Burn/delete key","description":"Burn/delete a key - to be able to burn it, it has to be on the dApp account","parameters":[{"name":"assetId","required":true,"in":"path","description":"Key asset id","example":"9kY6qhKMRs4jHBPTHV1Pgdzqbo3X4XmBM7koAxwR9RTf","schema":{"type":"string"}}],"responses":{"200":{"description":"Key burned successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["keys"],"security":[{"bearer":[]}]}},"/keys/{assetId}/transfer/{address}":{"put":{"operationId":"KeysController_transfer","summary":"Transfer key to address","description":"Transfer key to address.\n\n\n    This endpoint uses callback that sends request to supplier. It sends assetId and device address.","parameters":[{"name":"assetId","required":true,"in":"path","description":"Key asset id","example":"9kY6qhKMRs4jHBPTHV1Pgdzqbo3X4XmBM7koAxwR9RTf","schema":{"type":"string"}},{"name":"address","required":true,"in":"path","description":"Address to transfer key to","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud","schema":{"type":"string"}},{"name":"tags","required":false,"in":"query","isArray":true,"example":"tags=tag1&tags=tag2","description":"Tags for supplier","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Key transferred successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["keys"],"security":[{"bearer":[]}]}},"/keys/generate_and_transfer":{"post":{"operationId":"KeysController_generateAndTransferKey","summary":"Generate and transfer keys","description":"Generate keys for device and transfer to user. The maximum amount is 80.","deprecated":true,"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAndTransferKeyDto"}}}},"responses":{"200":{"description":"Keys generated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssetTransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["keys"],"security":[{"bearer":[]}]}},"/users":{"post":{"operationId":"UsersController_create","summary":"Add new user","description":"Create new address, transfer funds and save in dApp storage","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockchainAddress"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["users"],"security":[{"bearer":[]}]}},"/users/{address}":{"get":{"operationId":"UsersController_show","summary":"Get details of user","description":"Fetch user data","deprecated":true,"parameters":[{"name":"address","required":true,"in":"path","description":"Blockchain address of user","example":"3NBRJyj3RVj5wqz2i3z5KHqg88JcZQ8sr5k","schema":{"type":"string"}}],"responses":{"200":{"description":"User data fetched","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["users"],"security":[{"bearer":[]}]}},"/utils/faucet":{"post":{"operationId":"UtilsController_faucet","summary":"Transfer funds to given address","description":"Transfer funds from dApp to given address","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FaucetDto"}}}},"responses":{"201":{"description":"Transfer completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["utils"],"security":[{"bearer":[]}]}},"/utils/setup":{"post":{"operationId":"UtilsController_setup","summary":"Set dApp data","description":"Set dApp name, description, script template and alias. \n\n    NOTE: Aliases are PERMANENT and CANNOT BE REMOVED FROM THE BLOCKCHAIN NOR TRANSFERRED TO A DIFFERENT ADDRESS!","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetupDto"}}}},"responses":{"201":{"description":"Script set","content":{"application/json":{"schema":{"items":{"type":"array"},"properties":{"action":{"type":"string","description":"Name of performed action","example":"setScript"},"txHash":{"type":"string","description":"Transaction ID","example":"ETxijrCfCwtBYZG2GgVyU9pHvQ6GguXtrGxXpeEjM4kn"}},"example":[{"action":"setScript","txHash":"ETxijrCfCwtBYZG2GgVyU9pHvQ6GguXtrGxXpeEjM4kn"},{"action":"setName","txHash":"6u7nx69CGM8P589A6ZG7Um1MNF4889YSx6m1QrzVt5Zg"},{"action":"setDescription","txHash":"ED8mT6b1UTmBSNv79Z93iJbXTgQ2xHbbVZeRNjGdtTFo"}]}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["utils"],"security":[{"bearer":[]}]}},"/utils/status":{"get":{"operationId":"UtilsController_status","summary":"Show configuration","description":"Fetch data about the dApp","parameters":[],"responses":{"200":{"description":"Valid response data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Status"}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}}},"tags":["utils"],"security":[{"bearer":[]}]}},"/organisations/{organisation}/keys/{key}":{"delete":{"operationId":"OrganisationsController_removeKey","summary":"Remove key","description":"Burn key on organisation address and remove from device","parameters":[{"name":"organisation","required":true,"in":"path","description":"Address of organisation","example":"3NAyyezdeXvgEwe1qVe3HXpUZBkEgwMEgud","schema":{"type":"string"}},{"name":"key","required":true,"in":"path","description":"Key asset id","example":"6fE2qRiZrEAEgfU4b12VkLb8UGB9VpM7N4NncNAXoBYP","schema":{"type":"string"}}],"responses":{"200":{"description":"Key removed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"txHashes":{"type":"array","example":["6fE2qRiZrEAEgfU4b12VkLb8UGB9VpM7N4NncNAXoBYP","6fE2qRiZrEAEgfU4b12VkLb8UGB9VpM7N4NncNAXoBYP"]}}}}}},"400":{"description":"Custom error messsage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomErrorMessage"}}}},"401":{"description":"User not authorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"Item not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundResponse"}}}}},"tags":["organisations"],"security":[{"bearer":[]}]}}}}